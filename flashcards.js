var SYMBOLLIST = [
    ["Akas zīme", "dieva un pasaules", 0, "Kā četrvienība simbolizē stabilitāti, pilnību, veselumu, četrus gadalaikus, debespuses un pamatelementus (1, 40).", "akaszime.svg"],
    ["Apcirptais krusts", "citas", 3, "Simbolizē apturētu kustību, beigas (1, 135).", "apcirptaiskrusts.svg"],
    ["Apgrieztais Jumis", "citas", 3, "Simbolizē nāvi, postošo spēku. Pretējs Jumim (1, 134).", "apgrieztaisjumis.svg"],
    ["Astoņnītis", "visums un laika viļņa ciklu", 2, "Simbolizē bezgalību, laika ciklus (1, 112).", "astonitis.svg"],
    ["Auseklis", "dieva un pasaules", 0, "Simbolizē Gaismas koku un gaismas uzvaru cīņā pret tumsu (1, 47).", "auseklis.svg"],
    ["Austras koks", "dieva un pasaules", 0, "Saknes simbolizē pagātni - pazemi, stumbrs tagadni - cilvēkus, lapotne nākotni – debesis (1, 30).", "austraskoks.svg"],
    ["Dievaine", "dieva un pasaules", 0, "Simbolizē robežsituāciju starp pasaulēm (1, 116).", "dievaine.svg"],
    ["Dievs", "dieva un pasaules", 0, "Simbolizē aizsardzību, svētību, uzraudzību, aizstāvību. Tiek salīdzināts ar jumtu (1, 21).", "dievs.svg"],
    ["Jāņa zīme", "dieva un pasaules", 0, "Attēlo 3 Saules, ko raksturo vasaras saulgrieži. Tās simbolizē ceļu, kas sākas Ziemassvētkos, gaismas kulmināciju – Jāņus un rudeni – tumsu (1, 92).", "janis.svg"],
    ["Jumis", "dieva un pasaules", 0, "divdabīgs, simbolizē labklājību un auglību, bet arī nāvi un pabeigtību. Saistīta ar cikla posmiem un enerģiju (1, 65-66).", "jumis.svg"],
    ["Kāpnes", "visums un laika viļņa ciklu", 2, "Savieno elli, cilvēku pasauli un debesis. Simbolizē cilvēka mūžu un dvēseles ceļu (1, 117).", "kapnes.svg"],
    ["Krupītis", "dieva un pasaules", 0, "Simbolizē zemapziņu un intuīciju. Saistās ar neredzamo pasauli (1, 95).", "krupitis.svg"],
    ["Krusta zalktis", "laika un likteņa", 1, "Krusts raksturo dinamiskumu un kustību (1, 87).", "krustazalktis.svg"],
    ["Laimas grābeklītis", "laika un likteņa", 1, "Grabeklītis raksturo nevēlamā attīrīšanu un vēlamā piesaistīšanu (1, 122).", "laimasgrabeklitis.svg"],
    ["Laimas krusts", "laika un likteņa", 1, "Simbolizē likteni un svētību. Krusts attēlo Dievu centrā un pasaules spēkus tās atzarojumos (1, 81).", "laimaskrusts.svg"],
    ["Laimas skujiņa", "laika un likteņa", 1, "Skujiņa raksturo cilvēka mūžu un laika plūdumu (1, 80).", "laimasskujina.svg"],
    ["Laimas slotiņa", "laika un likteņa", 1, "Slotiņa simbolizē laika plūsmu. Tā vidus nozīmē tagadni. Slotiņa attēlo slieksni (1, 80).", "laimasslotina.svg"],
    ["Laipa", "laika un likteņa", 1, "Simbolizē līdzsvaru (1, 80).", "laipa.svg"],
    ["Māras līklocis", "dieva un pasaules", 0, "Simbolizē cikliskumu, dzīvību un nāvi (1, 35).", "marasliklocis.svg"],
    ["Māras vārti", "dieva un pasaules", 0, "Simbolizē reinkarnāciju (1, 36).", "marasvarti.svg"],
    ["Māras zeme", "dieva un pasaules", 0, "Simbolizē mieru, stabilitāti (1, 36). Arī robežu starp pasaulēm (1, 135).", "maraszeme.svg"],
    ["Māras zīme", "dieva un pasaules", 0, "Attēlo sievišķo, pretējo Dievam (1, 34).", "maraszime.svg"],
    ["Mārtiņa zīme", "dieva un pasaules", 0, "Simbolizē pārticību. Sevī ietver simetriju un dzīvības noslēpumu (1, 99).", "martinazime.svg"],
    ["Meandra cilpa", "dieva un pasaules", 0, "Ūdens māte, simbolizē straumi, cikliskumu (1, 36).", "meandracilpa.svg"],
    ["Mēness krusts", "dieva un pasaules", 0, "Simbolizē dzīvību un iznīcību. Saistīta ar zemkopību. Krusts simbolizē četras Mēness fāzes (1, 74-75).", "menesskrusts.svg"],
    ["Pasaules audums", "citas", 3, "Tīklveida režģis simbolizē pasaules vienotību, sadarbību, salīdzinot to ar bišu šūnām (1, 15-16).", "pasaulesaudums.svg"],
    ["Pilna Mēness zīme", "dieva un pasaules", 0, "Simbolizē dzīvību un iznīcību. Saistīta ar zemkopību. Nozīmē veselumu (1, 74-75).", "pilnsmeness.svg"],
    ["Punkts", "dieva un pasaules", 0, "Raksturo sākumu un beigas. Salīdzināma ar zvaigzni. Simbolizē radošo spēku (1, 109).", "punkts.svg"],
    ["Saules zīme", "dieva un pasaules", 0, "Simbolizē veselumu, mūžību, drošību, kustību. To saista ar harmoniju un dzīvību. Tā apzīmē gada galvenos notikumus – Lieldienas, Ziemassvētkus u.c. (1, 59-60).", "saule.svg"],
    ["Slīpais krusts", "dieva un pasaules", 0, "Simbolizē kustīgo, atbrīvoto enerģiju, arī kosmosu un pasaules centru (1, 24).", "slipaiskrusts.svg"],
    ["Slīpais Māras krusts", "dieva un pasaules", 0, "Simbolizē dzīves dinamiskumu, dzīvības uzplaukumu (1, 35).", "slipaismaraskrusts.svg"],
    ["Spārnotais pūķis", "laika un likteņa", 1, "Simbolizē gan postošu stihisku spēku, gan atjaunotību un dzīvības enerģiju. Izpaužas kā pūķis (1, 87).", "sparnotaispukis.svg"],
    ["Taisnais krusts", "dieva un pasaules", 0, "Nāves vai kristietības simbols. Simbolizē īslaicīgo nomiršanu un nekustīgo, arī kosmosu un pasaules centru (1, 24).", "taisnaiskrusts.svg"],
    ["Taisnais Māras krusts", "dieva un pasaules", 0, "Simbolizē dzīves noslēgšanu, lieto bēru cimdos (1, 35).", "taisnaismaraskrusts.svg"],
    ["Taisnais Māras krusts ar atdzimšanas iespēju", "dieva un pasaules", 0, "Simbolizē ciklisku maiņu un reinkarnācijas iespējamību. Raksturo nāvi un dzīvi, gaismu un tumsu (1, 136).", "taisnaismaraskrustsaratzimsanasiespeju.svg"],
    ["Ugunskrusts", "laika un likteņa", 1, "Apzīmē aizsardzību, enerģiju, gribu, mērķtiecību. Simbolizē kustību (1, 54-55).", "ugunskrusts.svg"],
    ["Ūsiņš", "dieva un pasaules", 0, "Spīdēt, aust. Simbolizē pavasari un gaismas atnākšanu (1, 70).", "usins.svg"],
    ["Žagariņš", "laika un likteņa", 1, "Simbolizē nepabeigtību, turpinājumu un ceļu (1, 81).", "zagarins.svg"],
    ["Zalkša zīme", "laika un likteņa", 1, "Simbolizē izmaiņas un plūsmu, līdzīgi zalkša kustībai. Raksturo līdzsvaru (1, 86-87).", "zalktis.svg"],
    ["Zvaigznes zīme", "dieva un pasaules", 0, "Simbolizē aizsardzību. Kristietībā – tikumība, bruņnieciskums, pieklājība, Dieva godāšana (1, 103).", "zvaigzneszime.svg"]
]

// macies.html -> Flashcard functionality
let shuffledList
let currentCard
let currentCardIndex = 35 // Set this to skip ahead
let img = document.getElementsByTagName("img")[0]
let answer
let nextFlashcardProcess = false
let points = 0
function generateSymbolList() {
    shuffledList = SYMBOLLIST
    for (let i = SYMBOLLIST.length - 1; i > 0; i--) { // Shuffle
        let j = Math.floor(Math.random() * (i+1));
        [shuffledList[i], shuffledList[j]] = [shuffledList[j], shuffledList[i]]
    }
    console.log(shuffledList)
    currentCard = shuffledList[currentCardIndex]
    updateCard()
}
function updateCard() {
    currentCard = shuffledList[currentCardIndex]
    img.setAttribute("src", "LatvjuZimesAssets/" + currentCard[4])

    let flashcard_progress = document.getElementsByClassName("flashcard-progress")[0]
    flashcard_progress.setAttribute("value", currentCardIndex)

    generateAnswers()
}
async function nextFlashcard() {
    currentCardIndex++
    if (currentCardIndex > shuffledList.length - 1) { // Reset list
        console.log(`${currentCardIndex}, End reached, new shuffle`)
        currentCardIndex = 0
        generateSymbolList()
        showResults(points)
        points = 0 // Always after showResults()
    }
    nextFlashcardProcess = false
    updateCard()
}
function previousFlashcard() {
    if (currentCardIndex > 0) {
        currentCardIndex--
    }
    updateCard()
}
async function checkRight(buttonid) {
    let button = document.getElementById(buttonid)

    if (!nextFlashcardProcess) {
        nextFlashcardProcess = true
        if (button.innerText === answer) {
            points++
            console.log("Right answer " + points)
            button.style.backgroundColor = "#5CE65C" // Correct green
            await new Promise((resolve) => setTimeout(resolve, 850))
            button.style.backgroundColor = ""
            nextFlashcard()
        }
        else if (button.innerText !== answer) {
            console.log("Wrong answer " + points)
            button.style.backgroundColor = "#E65C5C" // Correct green
            await new Promise((resolve) => setTimeout(resolve, 850))
            button.style.backgroundColor = ""
            nextFlashcard()
        }
    }
}
function generateAnswers() {
    answer = currentCard[0]
    let answerbuttons = document.getElementsByClassName("answerbuttons")
    let randomanswers = []
    let randindex
    randomanswers.push(answer) // Right answer always goes first
    for (let i = 0; i < 3; i++) {
        randindex = Math.floor(Math.random() * SYMBOLLIST.length)
        randomanswers.push(SYMBOLLIST[randindex][0])
    }

    randindex = Math.floor(Math.random() * randomanswers.length) // Imitate shuffling ->
    randomanswers[0] = randomanswers[randindex]
    randomanswers[randindex] = answer

    answerbuttons[0].innerText = randomanswers[0]
    answerbuttons[1].innerText = randomanswers[1]
    answerbuttons[2].innerText = randomanswers[2]
    answerbuttons[3].innerText = randomanswers[3]
}

async function showResults(points) {
    console.log(`Result ${points} points`)
    buttonlist = document.getElementsByClassName("flashcard-buttons")[0]
    img = document.getElementsByTagName("img")[0]
    flashcard = document.getElementsByClassName("flashcard")[0]
    results = document.getElementsByClassName("flashcard-results")[0]
    buttonlist.style.display = "none"
    img.style.display = "none"
    flashcard.style.display = "none"
    results.style.display = "flex"
    
    results_p = document.getElementsByClassName("results-p")[0]
    results_p.innerText = `Pareizi atbildēti: ${points} (${Math.round(100*points/40)}%)`

    let i = 1000
    if (i == 1000) {
        results_progress = document.getElementsByClassName("results-progress")[0]
        let interval = setInterval(progress, 10)
        function progress() {
            if (i <= 0) {
                clearInterval(interval)
            } else {
                i -= 2
                results_progress.setAttribute("value", i)
            }
        }
        while (i > 0) {
            await new Promise((resolve) => setTimeout(resolve, 10))
        }
    }
    

    buttonlist.style.display = "flex"
    img.style.display = "flex"
    flashcard.style.display = "block"
    results.style.display = "none"
}

document.addEventListener("DOMContentLoaded", generateSymbolList)
document.addEventListener("DOMContentLoaded", generateAnswers)